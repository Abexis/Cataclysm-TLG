[
  {
    "type": "effect_on_condition",
    "id": "EOC_GIVE_RANDOM_MISSION",
    "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
    "effect": [
      {
        "weighted_list_eocs": [
          [
            {
              "id": "give_MISSION_GET_RELIC",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_RELIC" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_RECORD_ACCOUNTING",
              "condition": { "u_has_trait": "GETS_RANDOM_MISSION" },
              "effect": { "offer_mission": "MISSION_GET_RECORD_ACCOUNTING" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_INHALER",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_INHALER" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_ANTIBIOTICS",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_ANTIBIOTICS" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_FLAG",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_FLAG" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_RECORD_WEATHER",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_RECORD_WEATHER" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_SOFTWARE",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_GET_SOFTWARE" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_GET_RECORD_PATIENT",
              "condition": { "u_has_trait": "GETS_RANDOM_MISSION" },
              "effect": { "offer_mission": "MISSION_GET_RECORD_PATIENT" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_KILL_JABBERWOCK",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_KILL_JABBERWOCK" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_KILL_ZOMBIE_MOM",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_KILL_ZOMBIE_MOM" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_RESCUE_DOG",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_RESCUE_DOG" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_PROVE_YOU_ARE_A_SURVIVOR",
              "condition": { "u_has_trait": "GETS_RANDOM_MISSION" },
              "effect": { "offer_mission": "MISSION_PROVE_YOU_ARE_A_SURVIVOR" }
            },
            1
          ],
          [
            {
              "id": "give_MISSION_LEARN_ABOUT_CATTAIL_JELLY",
              "condition": { "or": [ { "u_has_trait": "GETS_RANDOM_MISSION" }, { "u_has_trait": "GETS_RANDOM_MISSION_NOMOVE" } ] },
              "effect": { "offer_mission": "MISSION_LEARN_ABOUT_CATTAIL_JELLY" }
            },
            1
          ]
        ]
      },
      { "u_lose_trait": "GETS_RANDOM_MISSION" },
      { "u_lose_trait": "GETS_RANDOM_MISSION_NOMOVE" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MISSION_GET_DRIVEBELTS_done",
    "global": true,
    "condition": { "u_has_items": { "item": "drivebelt", "count": 3 } },
    "effect": [ { "u_sell_item": "drivebelt", "count": 3 } ],
    "false_effect": [ { "u_sell_item": "drivebelt_makeshift", "count": 3 } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REFUGEE_CENTER_NPC_MOVEMENT",
    "//": "Runs once an hour and moves refugee center npcs around based on what hour it is.",
    "global": true,
    "recurrence": "1 hours",
    "effect": [
      {
        "switch": { "math": [ "time_since('midnight', 'unit': 'hour')" ] },
        "cases": [
          { "case": 0, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 2, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } },
          { "case": 4, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 6, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } },
          { "case": 8, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 10, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } },
          { "case": 12, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 14, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } },
          { "case": 16, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 18, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } },
          { "case": 20, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION" } },
          { "case": 22, "effect": { "run_eocs": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION" } }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REFUGEE_CENTER_GUARD_FIRST_POSITION",
    "effect": [
      {
        "u_run_npc_eocs": [
          {
            "id": "EOC_REFUGEE_CENTER_GUARD_FIRST_SHIFT",
            "effect": { "u_set_guard_pos": { "global_val": "_First" }, "unique_id": true }
          }
        ],
        "unique_ids": [ "GUARD1", "GUARD2", "GUARD3", "GUARD4", "GUARD5", "GUARD6", "GUARD7" ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_REFUGEE_CENTER_GUARD_SECOND_POSITION",
    "effect": [
      {
        "u_run_npc_eocs": [
          {
            "id": "EOC_REFUGEE_CENTER_GUARD_SECOND_SHIFT",
            "effect": { "u_set_guard_pos": { "global_val": "_Second" }, "unique_id": true }
          }
        ],
        "unique_ids": [ "GUARD1", "GUARD2", "GUARD3", "GUARD4", "GUARD5", "GUARD6", "GUARD7" ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DIVING_INTO_WATER_CHECK",
    "global": true,
    "run_for_npcs": true,
    "eoc_type": "EVENT",
    "required_event": "avatar_moves",
    "condition": "u_is_underwater",
    "//": "I would assume that Mycus spores are a bit sticky to keep them from coming off, so this has a chance to be removed instead of a guarantee.",
    "effect": [
      {
        "if": { "and": [ { "u_has_effect": "spores" }, { "x_in_y_chance": { "x": 1, "y": 10 } } ] },
        "then": [
          { "u_message": "You scrub your body extensively, and spores are finally gone.", "type": "good" },
          { "u_lose_effect": "spores" }
        ]
      },
      {
        "if": { "u_has_effect": "boomered" },
        "then": [ { "u_message": "The bile is washed away from your face.", "type": "good" }, { "u_lose_effect": "boomered" } ]
      },
      {
        "if": { "u_has_effect": "glowing" },
        "then": [ { "u_message": "The glowing goo is washed away.", "type": "good" }, { "u_lose_effect": "glowing" } ]
      },
      {
        "if": { "u_has_effect": "corroding" },
        "then": [ { "u_message": "The acid is washed away from your body.", "type": "good" }, { "u_lose_effect": "corroding" } ]
      }
    ]
  }
]
